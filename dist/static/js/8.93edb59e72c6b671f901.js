webpackJsonp([8],{385:function(e,t,i){var s=i(137)(i(453),i(526),null,null,null);e.exports=s.exports},421:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),a=i.n(s),l=i(477),n=i.n(l);t.default={name:"groups",components:{"groups-edit":n.a},data:function(){return{search:"",pagination:{sortBy:"state",rowsPerPage:10},dialog:!1,dialogDelete:!1,show3:!1,checkbox:!1,switchValue:!0,headers:[{text:"id",align:"left",value:"id",width:"1%"},{text:"name",align:"left",value:"name"},{text:"abilities",align:"left",value:"abilities",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],valid:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=20||"Name must be less than 20 characters"}],editedIndex:-1,editedItem:{id:"",abilities:"",abilitiesUserList:[]},defaultItem:{name:"",abilities:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Group":"Edit Group"},formNew:function(){return-1===this.editedIndex},items:function(){return this.$store.getters.groupsTableData}},watch:{dialog:function(e){return e||this.close()}},methods:{removeAbility:function(e){var t=this.editedItem.abilities.findIndex(function(t){return t.id===e.id});t>=0&&this.editedItem.abilities.splice(t,1)},editItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem.id=e.id,this.editedItem.name=e.name,this.editedItem.abilities=e.relationships.abilities.map(function(e){return{id:e.id,name:e.name}}),this.editedItem.abilitiesUserList=e.relationships.abilities.map(function(e){return e.name}),this.dialog=!0},deleteDialog:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=a()({},e),this.dialogDelete=!0},deleteItem:function(){var e=this;if(this.editedIndex>-1){var t=this.editedItem;if(console.log(t),"admin"!==t.name){var i=this.items.indexOf(t);this.items.splice(i,1),this.$store.dispatch("deleteGroup",t.id),setTimeout(function(){e.$store.dispatch("fetchGroups")},500)}else console.log("Delete this group is not allowed")}},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=a()({},e.defaultItem),e.editedIndex=-1},300)},refreshData:function(){this.$store.dispatch("fetchGroups"),this.$store.dispatch("fetchAbilities")}},mounted:function(){this.$store.dispatch("fetchGroups"),this.$store.dispatch("fetchAbilities")}}},422:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),a=i.n(s);t.default={name:"groupsEdit",props:["itemId","itemName","abilitiesUserList","editedIndex","dialog"],data:function(){return{switchValue:!0,valid:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=20||"Name must be less than 20 characters"}],numberOfColumns:3,editedIndex:-1,editedItem:{id:"",abilities:"",abilitiesUserList:[]},defaultItem:{name:"",abilities:""},usersAbilities:[{name:"users_infos_all",color:"blue"},{name:"users_create",color:"blue"},{name:"users_infos",color:"blue"},{name:"users_update",color:"blue"},{name:"users_delete",color:"blue"}],groupsAbilities:[{name:"groups_infos_all",color:"red",disabled:!0},{name:"groups_create",color:"blue"},{name:"groups_infos",color:"blue"},{name:"groups_update",color:"blue"},{name:"groups_delete",color:"blue"}],abilitiesAbilities:[{name:"abilities_infos_all",color:"red",disabled:!0},{name:"abilities_infos",color:"blue"},{name:"abilities_update",color:"blue"}],meAbilities:[{name:"me_infos",color:"red",disabled:!0},{name:"me_update",color:"green"},{name:"me_otp_create",color:"green"}],requestsAbilities:[{name:"requests_infos_all",color:"red",disabled:!0},{name:"requests_create",color:"green"},{name:"requests_infos",color:"green"},{name:"requests_update",color:"green"},{name:"requests_delete",color:"green"}],instancesAbilities:[{name:"instances_infos_all",color:"red",disabled:!0},{name:"instances_create",color:"blue"},{name:"instances_infos",color:"green"},{name:"instances_update",color:"blue"},{name:"instances_delete",color:"blue"},{name:"instances_console",color:"green"},{name:"instances_state_infos",color:"green"},{name:"instances_state_update",color:"green"},{name:"instances_start",color:"green"},{name:"instances_freeze",color:"green"},{name:"instances_unfreeze",color:"green"},{name:"instances_stop",color:"green"},{name:"instances_stop_force",color:"green"},{name:"instances_restart",color:"green"}],snapshotsAbilities:[{name:"snapshots_infos_all",color:"green"},{name:"snapshots_create",color:"green"},{name:"snapshots_infos",color:"green"},{name:"snapshots_rename",color:"green"},{name:"requests_delete",color:"green"},{name:"requests_restore",color:"green"}],imagesAbilities:[{name:"images_infos_all",color:"red",disabled:!0},{name:"images_create",color:"blue"},{name:"images_infos",color:"green"},{name:"images_update",color:"blue"},{name:"images_delete",color:"blue"},{name:"images_aliases_infos_all",color:"green"},{name:"images_aliases_create",color:"blue"},{name:"images_aliases_infos",color:"green"},{name:"images_aliases_update",color:"blue"},{name:"images_aliases_delete",color:"blue"},{name:"images_remote_infos_all",color:"blue"}],otherAbilities:[{name:"operations_infos",color:"red",disabled:!0},{name:"lxd_infos",color:"blue"},{name:"resources_infos",color:"blue"},{name:"stats_infos",color:"green"},{name:"config_infos",color:"green"},{name:"config_update",color:"blue"},{name:"lxd_cert_create",color:"blue"}]}},computed:{dialogVal:{get:function(){return this.dialog},set:function(e){this.$emit("update:dialog",e)}},formTitle:function(){return-1===this.editedIndex?"New Group":"Edit Group"},items:function(){return this.$store.getters.groupsTableData},abilitiesId:function(){return this.$store.getters.abilitiessTableData.map(function(e){return{name:e.name,id:e.id}})}},watch:{dialog:function(e){return e||this.close()}},methods:{rowCount:function(e){return Math.floor((e.length-1)/this.numberOfColumns)+1},rowNum:function(e,t){var i=e*this.rowCount(t);return t.slice(i-this.rowCount(t),i)},close:function(){var e=this;this.dialogVal=!1,setTimeout(function(){e.editedItem=a()({},e.defaultItem),e.editedIndex=-1},300)},save:function(){var e=this;if(this.$refs.form.validate()){var t=this.abilitiesId.filter(function(t){return e.abilitiesUserList.includes(t.name)});this.editedItem.id=this.itemId,this.editedItem.name=this.itemName,this.editedItem.abilities=t,this.editedIndex>-1?(this.$store.dispatch("updateGroup",this.editedItem),setTimeout(function(){e.$store.dispatch("fetchGroups")},500)):(this.$store.dispatch("createGroup",this.editedItem),setTimeout(function(){e.$store.dispatch("fetchGroups")},500)),this.close()}}}}},453:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(476),a=i.n(s);t.default={name:"container",components:{groups:a.a},data:function(){return{}}}},476:function(e,t,i){var s=i(137)(i(421),i(531),null,null,null);e.exports=s.exports},477:function(e,t,i){var s=i(137)(i(422),i(549),null,null,null);e.exports=s.exports},526:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("groups")],1)},staticRenderFns:[]}},531:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"grid-list-md":""}},[i("v-card",[i("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",small:"",color:"blue"},on:{click:e.refreshData}},[i("v-icon",[e._v("refresh")])],1),e._v(" "),i("v-card-title",[i("v-dialog",{attrs:{"max-width":"490"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[e._v("Are you sure to delete user "+e._s(e.editedItem.name)+"?")]),e._v(" "),i("v-card-text",[e._v("This action cannot by undo.")]),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v("Disagree")]),e._v(" "),i("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}},nativeOn:{click:function(t){return e.deleteItem(t)}}},[e._v("Agree")])],1)],1)],1),e._v(" "),i("groups-edit",{attrs:{itemId:e.editedItem.id,itemName:e.editedItem.name,abilitiesUserList:e.editedItem.abilitiesUserList,editedIndex:e.editedIndex,dialog:e.dialog},on:{"update:dialog":function(t){e.dialog=t}}}),e._v(" "),i("v-btn",{staticClass:"mb-1",attrs:{color:"primary",dark:""},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("New group")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-text-field",{attrs:{"append-icon":"search",label:e.$t("actions.search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),e.items?i("v-data-table",{attrs:{headers:e.headers,items:e.items,search:e.search},scopedSlots:e._u([{key:"item.abilities",fn:function(t){var s=t.item;return e._l(s.relationships.abilities,function(t){return i("span",[i("v-chip",{attrs:{small:""}},[e._v(e._s(t.name))])],1)})}},{key:"item.actions",fn:function(t){var s=t.item;return[i("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(t){return e.editItem(s)}}},[i("v-icon",{attrs:{color:"teal"}},[e._v("edit")])],1),e._v(" "),i("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(t){return e.deleteDialog(s)}}},[i("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1)]}}],null,!1,452334370)},[e._v(" "),e._v(" "),i("template",{slot:"no-data"},[i("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])],1)],2):e._e()],1)],1)},staticRenderFns:[]}},549:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{"max-width":"750px"},model:{value:e.dialogVal,callback:function(t){e.dialogVal=t},expression:"dialogVal"}},[i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-card-title",[i("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[i("v-text-field",{attrs:{label:"Group name",rules:e.nameRules,required:""},model:{value:e.itemName,callback:function(t){e.itemName=t},expression:"itemName"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[i("v-switch",{attrs:{label:"Required abilities for lxdmanager",color:"red",readonly:"",value:e.switchValue,"hide-details":""},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}})],1),e._v(" "),i("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[i("v-switch",{attrs:{label:"Default admin values",color:"blue",readonly:"",value:e.switchValue,"hide-details":""},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}})],1),e._v(" "),i("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[i("v-switch",{attrs:{label:"Default user values",color:"green",readonly:"",value:e.switchValue,"hide-details":""},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}})],1)],1)],1),e._v(" "),i("v-container",{attrs:{fluid:""}},[i("span",[e._v("Users abilities")]),e._v(" "),i("v-row",e._l(e.numberOfColumns,function(t){return i("v-col",{key:e.usersAbilities.id,attrs:{cols:"12",sm:"4",md:"4"}},e._l(e.rowNum(t,e.usersAbilities),function(t){return i("v-switch",{key:e.usersAbilities.id,attrs:{label:t.name,color:t.color,value:t.name,disabled:t.disabled,"hide-details":""},model:{value:e.abilitiesUserList,callback:function(t){e.abilitiesUserList=t},expression:"abilitiesUserList"}})}),1)}),1)],1),e._v(" "),i("v-container",{attrs:{fluid:""}},[i("span",[e._v("Groups abilities")]),e._v(" "),i("v-row",e._l(e.numberOfColumns,function(t){return i("v-col",{key:e.groupsAbilities.id,attrs:{cols:"12",sm:"4",md:"4"}},e._l(e.rowNum(t,e.groupsAbilities),function(t){return i("v-switch",{key:e.groupsAbilities.id,attrs:{label:t.name,color:t.color,value:t.name,disabled:t.disabled,"hide-details":""},model:{value:e.abilitiesUserList,callback:function(t){e.abilitiesUserList=t},expression:"abilitiesUserList"}})}),1)}),1)],1),e._v(" "),i("v-container",{attrs:{fluid:""}},[i("span",[e._v("Abilities abilities")]),e._v(" "),i("v-row",e._l(e.numberOfColumns,function(t){return i("v-col",{key:e.abilitiesAbilities.id,attrs:{cols:"12",sm:"4",md:"4"}},e._l(e.rowNum(t,e.abilitiesAbilities),function(t){return i("v-switch",{key:e.abilitiesAbilities.id,attrs:{label:t.name,color:t.color,value:t.name,disabled:t.disabled,"hide-details":""},model:{value:e.abilitiesUserList,callback:function(t){e.abilitiesUserList=t},expression:"abilitiesUserList"}})}),1)}),1)],1),e._v(" "),i("v-container",{attrs:{fluid:""}},[i("span",[e._v("Requests abilities")]),e._v(" "),i("v-row",e._l(e.numberOfColumns,function(t){return i("v-col",{key:e.requestsAbilities.id,attrs:{cols:"12",sm:"4",md:"4"}},e._l(e.rowNum(t,e.requestsAbilities),function(t){return i("v-switch",{key:e.requestsAbilities.id,attrs:{label:t.name,color:t.color,value:t.name,disabled:t.disabled,"hide-details":""},model:{value:e.abilitiesUserList,callback:function(t){e.abilitiesUserList=t},expression:"abilitiesUserList"}})}),1)}),1)],1),e._v(" "),i("v-container",{attrs:{fluid:""}},[i("span",[e._v("Instances abilities")]),e._v(" "),i("v-row",e._l(e.numberOfColumns,function(t){return i("v-col",{key:e.instancesAbilities.id,attrs:{cols:"12",sm:"4",md:"4"}},e._l(e.rowNum(t,e.instancesAbilities),function(t){return i("v-switch",{key:e.instancesAbilities.id,attrs:{label:t.name,color:t.color,value:t.name,disabled:t.disabled,"hide-details":""},model:{value:e.abilitiesUserList,callback:function(t){e.abilitiesUserList=t},expression:"abilitiesUserList"}})}),1)}),1)],1),e._v(" "),i("v-container",{attrs:{fluid:""}},[i("span",[e._v("Snapshots abilities")]),e._v(" "),i("v-row",e._l(e.numberOfColumns,function(t){return i("v-col",{key:e.snapshotsAbilities.id,attrs:{cols:"12",sm:"4",md:"4"}},e._l(e.rowNum(t,e.snapshotsAbilities),function(t){return i("v-switch",{key:e.snapshotsAbilities.id,attrs:{label:t.name,color:t.color,value:t.name,disabled:t.disabled,"hide-details":""},model:{value:e.abilitiesUserList,callback:function(t){e.abilitiesUserList=t},expression:"abilitiesUserList"}})}),1)}),1)],1),e._v(" "),i("v-container",{attrs:{fluid:""}},[i("span",[e._v("Images abilities")]),e._v(" "),i("v-row",e._l(e.numberOfColumns,function(t){return i("v-col",{key:e.imagesAbilities.id,attrs:{cols:"12",sm:"4",md:"4"}},e._l(e.rowNum(t,e.imagesAbilities),function(t){return i("v-switch",{key:e.imagesAbilities.id,attrs:{label:t.name,color:t.color,value:t.name,disabled:t.disabled,"hide-details":""},model:{value:e.abilitiesUserList,callback:function(t){e.abilitiesUserList=t},expression:"abilitiesUserList"}})}),1)}),1)],1),e._v(" "),i("v-container",{attrs:{fluid:""}},[i("span",[e._v("Other abilities")]),e._v(" "),i("v-row",e._l(e.numberOfColumns,function(t){return i("v-col",{key:e.otherAbilities.id,attrs:{cols:"12",sm:"4",md:"4"}},e._l(e.rowNum(t,e.otherAbilities),function(t){return i("v-switch",{key:e.otherAbilities.id,attrs:{label:t.name,color:t.color,value:t.name,disabled:t.disabled,"hide-details":""},model:{value:e.abilitiesUserList,callback:function(t){e.abilitiesUserList=t},expression:"abilitiesUserList"}})}),1)}),1)],1)],1)],1)],1),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",text:""},nativeOn:{click:function(t){return e.close(t)}}},[e._v("Cancel")]),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},nativeOn:{click:function(t){return e.save(t)}}},[e._v("Save")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=8.93edb59e72c6b671f901.js.map