webpackJsonp([12],{402:function(e,t,s){var i=s(137)(s(516),s(618),null,null,null);e.exports=i.exports},499:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(0),a=s.n(i);t.default={name:"users",data:function(){return{search:"",pagination:{sortBy:"state",rowsPerPage:10},dialog:!1,dialogDelete:!1,show3:!1,checkbox:!1,headers:[{text:"id",align:"left",value:"id",width:"1%"},{text:"username",align:"left",value:"username"},{text:"email",align:"left",value:"email"},{text:"name",align:"left",value:"name"},{text:"admin",align:"left",value:"admin"},{text:"groups",align:"left",value:"groups",sortable:!1},{text:"instances",align:"left",value:"instances",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],valid:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=20||"Name must be less than 20 characters"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>=8||"Password must be more than 8 characters"}],editedIndex:-1,editedItem:{id:"",admin:"",username:"",email:"",name:"",phone:"",address:"",city:"",country:"",postal_code:"",ico:"",ic_dph:"",dic:"",groups:[{name:"users",id:2}],instances:"",password:"",otp_type:"",language:""},defaultItem:{id:"",admin:"",username:"",email:"",name:"",phone:"",address:"",city:"",country:"",postal_code:"",ico:"",ic_dph:"",dic:"",groups:[{name:"users",id:2}],instances:"",password:"",otp_type:"",language:""},lang:[{text:"English",value:"en"},{text:"Slovensky",value:"sk"}]}},computed:{formTitle:function(){return-1===this.editedIndex?"New User":"Edit User"},formNew:function(){return-1===this.editedIndex},items:function(){return this.$store.getters.usersTableData},instancesList:function(){return this.$store.getters.instancesList},groupsList:function(){return this.$store.getters.groupsList}},watch:{dialog:function(e){return e||this.close()}},methods:{editItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=a()({},e),this.dialog=!0},deleteDialog:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=a()({},e),this.dialogDelete=!0},deleteItem:function(){var e=this;if(this.editedIndex>-1){var t=this.editedItem;if(t.admin)console.log("Delete this user is not allowed");else{var s=this.items.indexOf(t);this.items.splice(s,1),this.$store.dispatch("deleteUser",t.id),setTimeout(function(){e.$store.dispatch("fetchUsers")},500)}}},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=a()({},e.defaultItem),e.editedIndex=-1},300)},save:function(){var e=this;this.$refs.form.validate()&&(this.editedIndex>-1?(a()(this.items[this.editedIndex],this.editedItem),console.log(this.editedItem),this.$store.dispatch("updateUser",this.editedItem),setTimeout(function(){e.$store.dispatch("fetchUsers")},500)):(this.items.push(this.editedItem),this.$store.dispatch("createUser",this.editedItem),setTimeout(function(){e.$store.dispatch("fetchUsers")},500)),this.close())},generatePassword:function(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789^°!\"§$%&/()=?`*+~'#,;.:-_",s="",i=0,a=t.length;i<e;i+=1)s+=t.charAt(Math.floor(Math.random()*a));this.editedItem.password=s},refreshData:function(){this.$store.dispatch("fetchUsers")},reset:function(){this.$refs.form.reset()}},mounted:function(){this.$store.dispatch("fetchUsers")}}},516:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(568),a=s.n(i);t.default={name:"Users",components:{users:a.a},data:function(){return{}}}},568:function(e,t,s){var i=s(137)(s(499),s(587),null,null,null);e.exports=i.exports},587:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"grid-list-md":""}},[s("v-card",[s("v-card-title",[s("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",small:"",color:"blue"},on:{click:e.refreshData}},[s("v-icon",[e._v("refresh")])],1),e._v(" "),s("v-dialog",{attrs:{"max-width":"490"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("Are you sure to delete user "+e._s(e.editedItem.username)+"?")]),e._v(" "),s("v-card-text",[e._v("This action cannot by undo.")]),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}}},[e._v("Disagree")]),e._v(" "),s("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialogDelete=!1}},nativeOn:{click:function(t){return e.deleteItem(t)}}},[e._v("Agree")])],1)],1)],1),e._v(" "),s("v-dialog",{attrs:{"max-width":"700px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[s("v-btn",e._g({attrs:{color:"primary",dark:""}},i),[e._v("\n          New user\n        ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),s("v-card",[s("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-card-title",[s("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"Username",rules:e.nameRules,required:""},model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"Email",rules:e.emailRules,required:""},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"Name",rules:e.nameRules,required:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"Phone"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md8:""}},[s("v-text-field",{attrs:{label:"Address"},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"City"},model:{value:e.editedItem.city,callback:function(t){e.$set(e.editedItem,"city",t)},expression:"editedItem.city"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"Country"},model:{value:e.editedItem.country,callback:function(t){e.$set(e.editedItem,"country",t)},expression:"editedItem.country"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"Postal code"},model:{value:e.editedItem.postal_code,callback:function(t){e.$set(e.editedItem,"postal_code",t)},expression:"editedItem.postal_code"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"ICO"},model:{value:e.editedItem.ico,callback:function(t){e.$set(e.editedItem,"ico",t)},expression:"editedItem.ico"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"IC DPH"},model:{value:e.editedItem.ic_dph,callback:function(t){e.$set(e.editedItem,"ic_dph",t)},expression:"editedItem.ic_dph"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-text-field",{attrs:{label:"DIC"},model:{value:e.editedItem.dic,callback:function(t){e.$set(e.editedItem,"dic",t)},expression:"editedItem.dic"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-select",{attrs:{items:e.lang,label:e.$t("settings.settings.language")},model:{value:e.editedItem.language,callback:function(t){e.$set(e.editedItem,"language",t)},expression:"editedItem.language"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md8:""}},[s("v-text-field",{attrs:{"append-icon":e.show3?"visibility_off":"visibility",type:e.show3?"text":"password",name:"password",label:"Password",hint:"At least 8 characters",value:"",autocomplete:"new-password",required:"",rules:e.formNew?e.passwordRules:""},on:{"click:append":function(t){e.show3=!e.show3}},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[s("v-btn",{attrs:{outlined:"",block:"",small:""},on:{click:function(t){return e.generatePassword(10)}}},[e._v("Generate password")])],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-checkbox",{attrs:{value:"email",label:"Enable OTP by Email"},model:{value:e.editedItem.otp_type,callback:function(t){e.$set(e.editedItem,"otp_type",t)},expression:"editedItem.otp_type"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-autocomplete",{attrs:{items:e.groupsList,color:"blue-grey lighten-2",label:"Groups","item-text":"name","item-value":"id",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[s("v-chip",[e._v("\n                    "+e._s(t.item.name)+"\n                  ")])]}}]),model:{value:e.editedItem.groups,callback:function(t){e.$set(e.editedItem,"groups",t)},expression:"editedItem.groups"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[s("v-autocomplete",{attrs:{items:e.instancesList,chips:"",color:"blue-grey lighten-2",label:"Instances","item-text":"name","item-value":"id",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[s("v-chip",[e._v("\n                    "+e._s(t.item.name)+"\n                  ")])]}}]),model:{value:e.editedItem.instances,callback:function(t){e.$set(e.editedItem,"instances",t)},expression:"editedItem.instances"}})],1)],1)],1)],1),e._v(" "),s("v-card-actions",[s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.reset}},[e._v("Reset")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},nativeOn:{click:function(t){return e.close(t)}}},[e._v("Cancel")]),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},nativeOn:{click:function(t){return e.save(t)}}},[e._v("Save")])],1)],1)],1)],1),e._v(" "),s("v-spacer"),e._v(" "),s("v-text-field",{attrs:{"append-icon":"search",label:e.$t("actions.search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),e.items?s("v-data-table",{attrs:{headers:e.headers,items:e.items,search:e.search},scopedSlots:e._u([{key:"item.groups",fn:function(t){var i=t.item;return e._l(i.groups,function(t){return i.groups?s("span",[s("v-chip",{attrs:{small:""}},[e._v(e._s(t.name))])],1):e._e()})}},{key:"item.instances",fn:function(t){var i=t.item;return e._l(i.instances,function(t){return i.instances?s("span",[s("v-chip",{attrs:{small:""}},[e._v(e._s(t.name))])],1):e._e()})}},{key:"item.actions",fn:function(t){var i=t.item;return[s("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(t){return e.editItem(i)}}},[s("v-icon",{attrs:{color:"teal"}},[e._v("edit")])],1),e._v(" "),"admin"!==i.username?s("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(t){return e.deleteDialog(i)}}},[s("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1):e._e()]}}],null,!1,2498501123)},[e._v(" "),e._v(" "),e._v(" "),s("template",{slot:"no-data"},[s("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])],1)],2):e._e()],1)],1)},staticRenderFns:[]}},618:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("users")],1)},staticRenderFns:[]}}});
//# sourceMappingURL=12.9880ce1f4c89a6bc7ccf.js.map