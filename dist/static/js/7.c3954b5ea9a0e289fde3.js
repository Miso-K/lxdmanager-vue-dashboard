webpackJsonp([7],{396:function(e,t,i){var s=i(137)(i(510),i(602),null,null,null);e.exports=s.exports},413:function(e,t,i){e.exports={default:i(421),__esModule:!0}},414:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=i(416),r=s(n),a=i(415),o=s(a);t.default=function(){function e(e,t){var i=[],s=!0,n=!1,r=void 0;try{for(var a,c=(0,o.default)(e);!(s=(a=c.next()).done)&&(i.push(a.value),!t||i.length!==t);s=!0);}catch(e){n=!0,r=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw r}}return i}return function(t,i){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},415:function(e,t,i){e.exports={default:i(419),__esModule:!0}},416:function(e,t,i){e.exports={default:i(420),__esModule:!0}},419:function(e,t,i){i(79),i(78),e.exports=i(423)},420:function(e,t,i){i(79),i(78),e.exports=i(424)},421:function(e,t,i){i(425),e.exports=i(2).Object.entries},422:function(e,t,i){var s=i(32),n=i(24),r=i(37).f;e.exports=function(e){return function(t){for(var i,a=n(t),o=s(a),c=o.length,l=0,u=[];c>l;)r.call(a,i=o[l++])&&u.push(e?[i,a[i]]:a[i]);return u}}},423:function(e,t,i){var s=i(16),n=i(138);e.exports=i(2).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return s(t.call(e))}},424:function(e,t,i){var s=i(80),n=i(5)("iterator"),r=i(31);e.exports=i(2).isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||r.hasOwnProperty(s(t))}},425:function(e,t,i){var s=i(8),n=i(422)(!0);s(s.S,"Object",{entries:function(e){return n(e)}})},451:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(414),n=i.n(s),r=i(413),a=i.n(r);t.default={components:{},data:function(){return{hasCreated:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length>=3||"Name must be more than 3 characters"}],valid:!1,showIspconfig:!1,ispconfig:"no",period:{text:"1 Month",value:1},os:"",cpu:"1",memory:"512",disk:"10",cpuLimit:!0,memoryLimit:!0,diskLimit:!0,periodes:[{text:"1 Month",value:1},{text:"3 Months",value:1},{text:"6 Months",value:.95},{text:"12 Months",value:.9},{text:"24 Months",value:.8}],owners:"",price:""}},computed:{active:{get:function(){return this.$store.state.instances.dialogs.create},set:function(e){e||this.closeDialog()}},showPrice:function(){return"True"===this.$store.getters.appconfig.price.enabled},templates:function(){return this.$store.getters.imagesTableData.filter(function(e){return""!==e.name}).map(function(e){return{text:e.alias_description?e.alias_description:e.name,value:e.name}})},getPrice:function(){return this.$store.getters.appconfig.price},getCPU:function(){return this.$store.getters.appconfig.cpu},getMemory:function(){return this.$store.getters.appconfig.memory},getStorage:function(){return this.$store.getters.appconfig.storage},diskEnabled:function(){return!!this.getStorage&&"True"===this.$store.getters.appconfig.storage.enabled},me:function(){return this.$store.getters["auth/me"]},canCreate:function(){return this.me.abilities.includes("instances_create")},usersId:function(){return this.$store.getters.usersTableData.map(function(e){return{name:e.name,id:e.id}})},getProductionName:function(){return this.$store.getters.appconfig.app.production_name},getPeriodes:function(){var e=this.periodes,t=this.$store.getters.appconfig;return e[0].value=t.price.discount_month,e[1].value=t.price.discount_months,e[2].value=t.price.discount_halfyear,e[3].value=t.price.discount_year,e[4].value=t.price.discount_years,e},calcPrice:{get:function(){var e=this.getPrice.cpu*this.cpu,t=this.getPrice.memory*this.memory,i=this.getPrice.disk*this.disk,s=this.period.value,n=(e+t+i)*s;return this.price=n.toFixed(2),n.toFixed(2)},set:function(e){return this.price=parseFloat(e).toFixed(2),parseFloat(e).toFixed(2)}}},methods:{removeUsers:function(e){var t=this.owners.findIndex(function(t){return t===e.id});t>=0&&this.owners.splice(t,1)},setVPS:function(e){switch(e){case 1:this.cpu=1,this.memory=512,this.disk=10;break;case 2:this.cpu=1,this.memory=1024,this.disk=30;break;case 3:this.cpu=2,this.memory=2048,this.disk=50;break;case 4:this.cpu=4,this.memory=8172,this.disk=160;break;default:this.cpu=1,this.memory=512,this.disk=10}},closeDialog:function(){this.step=0,this.$store.dispatch("closeInstanceCreateDialog")},save:function(){var e=this;if(this.$refs.form.validate()){if(this.name){var t={name:this.name,os:this.os,cpu:this.cpuLimit?this.cpu:"",memory:this.memoryLimit?""+this.memory+this.getMemory.limits_unit:"",disk:this.diskLimit?""+this.disk+this.getStorage.limits_unit:"",pool_name:"True"===this.getStorage.enabled?this.getStorage.pool_name:"",period:this.showPrice?this.period.text:"",price:this.showPrice?this.price:"",users:this.owners};this.canCreate?(this.$store.dispatch("createInstance",t),setTimeout(function(){e.$store.dispatch("fetchInstances")},500)):this.sendRequest(t)}this.active=!1}},sendRequest:function(e){if(""!==this.name){var t=e;t.users=[this.me.id],t.users_name=[this.me.username];var i="";a()(t).forEach(function(e){var t=n()(e,2),s=t[0],r=t[1];i+=s+": "+r+" <br>"});var s=""+this.$i18n.t("requests.mail_message",[this.getProductionName,"create","waiting",i]);this.$store.dispatch("createRequests",{action:"create",message:"Create new instance "+this.name,status:"waiting",meta_data:t,mail_message:s}),this.$store.dispatch("notify",{id:0,message:""+this.$i18n.t("notifications.request_created"),color:""}),this.active=!1}}},created:function(){this.$store.dispatch("fetchImages")}}},453:function(e,t,i){var s=i(137)(i(451),i(455),null,null,null);e.exports=s.exports},455:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-layout",{attrs:{row:"","justify-center":""}},[i("v-dialog",{attrs:{"max-width":"800px"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-card-title",[i("span",{staticClass:"headline"},[e._v(e._s(e.$t("instances.order.new")))])]),e._v(" "),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-text-field",{attrs:{rules:e.nameRules,label:e.$t("instances.order.instance_name.label"),required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-select",{attrs:{items:e.templates,rules:[function(e){return!!e||"Item is required"}],required:"",label:e.$t("instances.order.os.label")},model:{value:e.os,callback:function(t){e.os=t},expression:"os"}})],1),e._v(" "),i("v-flex",{attrs:{xs3:"",sm3:""}},[i("v-btn",{attrs:{block:"",large:"",value:"vps1"},on:{click:function(t){return e.setVPS(1)}}},[e._v("\n                  VPS1\n                ")])],1),e._v(" "),i("v-flex",{attrs:{xs3:"",sm3:""}},[i("v-btn",{attrs:{block:"",large:"",value:"vps1"},on:{click:function(t){return e.setVPS(2)}}},[e._v("\n                  VPS2\n                ")])],1),e._v(" "),i("v-flex",{attrs:{xs3:"",sm3:""}},[i("v-btn",{attrs:{block:"",large:"",value:"vps1"},on:{click:function(t){return e.setVPS(3)}}},[e._v("\n                  VPS3\n                ")])],1),e._v(" "),i("v-flex",{attrs:{xs3:"",sm3:""}},[i("v-btn",{attrs:{block:"",large:"",value:"vps1"},on:{click:function(t){return e.setVPS(4)}}},[e._v("\n                  VPS4\n                ")])],1),e._v(" "),i("v-flex",{attrs:{xs10:""}},[i("v-slider",{attrs:{disabled:!e.cpuLimit,min:e.getCPU.limits_min,max:e.getCPU.limits_max,step:e.getCPU.limits_step,label:e.$t("instances.order.cpu.label"),"tick-size":"4",ticks:""},model:{value:e.cpu,callback:function(t){e.cpu=t},expression:"cpu"}})],1),e._v(" "),i("v-flex",{attrs:{xs2:""}},[e.cpuLimit?i("v-text-field",{attrs:{type:"CPUs",suffix:"CPUs"},model:{value:e.cpu,callback:function(t){e.cpu=t},expression:"cpu"}}):e._e(),e._v(" "),e.cpuLimit?e._e():i("v-text-field",{attrs:{value:"Unlimited",disabled:!e.cpuLimit}})],1),e._v(" "),i("v-flex",{attrs:{xs10:""}},[i("v-slider",{attrs:{disabled:!e.memoryLimit,min:e.getMemory.limits_min,max:e.getMemory.limits_max,step:e.getMemory.limits_step,label:e.$t("instances.order.memory.label"),"tick-size":"4",ticks:""},model:{value:e.memory,callback:function(t){e.memory=t},expression:"memory"}})],1),e._v(" "),i("v-flex",{attrs:{xs2:""}},[e.memoryLimit?i("v-text-field",{attrs:{type:"MB",suffix:e.getMemory.limits_unit_show},model:{value:e.memory,callback:function(t){e.memory=t},expression:"memory"}}):e._e(),e._v(" "),e.memoryLimit?e._e():i("v-text-field",{attrs:{value:"Unlimited",disabled:!e.memoryLimit}})],1),e._v(" "),i("v-flex",{attrs:{xs10:""}},[e.diskEnabled?i("v-slider",{attrs:{disabled:!e.diskLimit,min:e.getStorage.limits_min,max:e.getStorage.limits_max,step:e.getStorage.limits_step,label:e.$t("instances.order.disk.label"),"tick-size":"4",ticks:""},model:{value:e.disk,callback:function(t){e.disk=t},expression:"disk"}}):e._e()],1),e._v(" "),i("v-flex",{attrs:{xs2:""}},[e.diskEnabled&&e.diskLimit?i("v-text-field",{attrs:{type:"Disk",disabled:!e.diskLimit,suffix:e.getStorage.limits_unit_show},model:{value:e.disk,callback:function(t){e.disk=t},expression:"disk"}}):e._e(),e._v(" "),e.diskEnabled&&!e.diskLimit?i("v-text-field",{attrs:{value:"Unlimited",disabled:!e.diskLimit}}):e._e()],1),e._v(" "),e.me.admin?i("v-checkbox",{staticClass:"mx-2",attrs:{label:"CPU limit"},model:{value:e.cpuLimit,callback:function(t){e.cpuLimit=t},expression:"cpuLimit"}}):e._e(),e._v(" "),e.me.admin?i("v-checkbox",{staticClass:"mx-2",attrs:{label:"Memory limit"},model:{value:e.memoryLimit,callback:function(t){e.memoryLimit=t},expression:"memoryLimit"}}):e._e(),e._v(" "),e.diskEnabled&&e.me.admin?i("v-checkbox",{staticClass:"mx-2",attrs:{label:"Disk limit"},model:{value:e.diskLimit,callback:function(t){e.diskLimit=t},expression:"diskLimit"}}):e._e(),e._v(" "),i("v-flex",{attrs:{xs12:""}},[e.showIspconfig?i("v-radio-group",{model:{value:e.ispconfig,callback:function(t){e.ispconfig=t},expression:"ispconfig"}},[i("v-radio",{attrs:{value:"yes",label:"Install ISPconfig"}}),e._v(" "),i("v-radio",{attrs:{value:"no",label:"Do not Install ISPconfig"}})],1):e._e()],1),e._v(" "),e.showPrice?[i("v-flex",{attrs:{xs3:""}},[i("v-subheader",[e._v(e._s(e.$t("instances.order.payment_period.label")))])],1),e._v(" "),i("v-flex",{attrs:{xs3:""}},[i("v-select",{attrs:{items:e.getPeriodes,"item-text":"text","item-value":"value","return-object":"",label:"Period"},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}})],1),e._v(" "),i("v-flex",{attrs:{xs4:""}},[i("v-subheader",[e._v(e._s(e.$t("instances.order.calculated_price.label")))])],1),e._v(" "),i("v-flex",{attrs:{xs2:""}},[i("v-text-field",{attrs:{suffix:"€",label:"Price per month",disabled:!e.me.admin},model:{value:e.calcPrice,callback:function(t){e.calcPrice=t},expression:"calcPrice"}})],1)]:e._e(),e._v(" "),e.me.admin?[i("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[i("v-autocomplete",{attrs:{disabled:!e.me.admin,items:e.usersId,chips:"",color:"blue-grey lighten-2",label:"New owners","item-text":"name","item-value":"id",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[i("v-chip",{staticClass:"chip--select-multi",attrs:{"input-value":t.selected,close:""},on:{"click:close":function(i){return e.removeUsers(t.item)}}},[e._v("\n                    "+e._s(t.item.name)+"\n                  ")])]}},{key:"item",fn:function(t){return[[i("v-list-tile-content",{domProps:{textContent:e._s(t.item.name)}})]]}}],null,!1,3128760912),model:{value:e.owners,callback:function(t){e.owners=t},expression:"owners"}})],1)]:e._e()],2)],1)],1),e._v(" "),i("v-card-actions",[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"blue darken-1",text:""},nativeOn:{click:function(t){e.active=!1}}},[e._v(e._s(e.$t("actions.close")))]),e._v(" "),i("v-btn",{attrs:{color:"green darken-1",text:"",disabled:!e.valid},on:{click:e.save}},[e._v(e._s(e.$t("actions.create")))])],1)],1)],1)],1)],1)},staticRenderFns:[]}},480:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),n=i.n(s),r=i(453),a=i.n(r),o=i(54);t.default={name:"Instances",components:{"order-create":a.a},data:function(){return{search:"",pagination:{sortBy:"name",rowsPerPage:15},dialog:!1,dialogDelete:!1,headers:[{text:this.$t("actions.name"),align:"left",value:"action",class:"pl-4",sortable:!1},{text:this.$t("stats.status"),align:"left",value:"status",class:"pl-0",sortable:!1},{text:this.$t("stats.name"),align:"left",value:"name",class:"pa-1"},{text:this.$tc("stats.cpu",1)+"·s",align:"left",value:"config.limits_cpu",sortable:!1,class:"pa-1"},{text:this.$t("stats.memory_limit"),align:"left",value:"config.limits_memory",class:"pa-1"},{text:this.$t("stats.disk_limit"),align:"left",value:"config.limits_disk",disk:!1,class:"pa-1"},{text:"IPv4",align:"left",value:"ips[0].address",sortable:!1,class:"pa-1"},{text:"IPv6",align:"left",value:"ips[1].address",sortable:!1,class:"pa-1"},{text:this.$t("stats.price"),align:"left",value:"config.user_price",sortable:!0,price:!1,class:"pa-1"},{text:this.$t("stats.type"),align:"left",value:"type",sortable:!0,type:!1,class:"pa-1"},{text:"Server",align:"left",value:"servers[0].name",sortable:!0,servers:!1,class:"pa-1"}],editedIndex:-1,editedItem:{name:"",os:"",cpu:"",memory:"",disk:""},defaultItem:{name:"",os:"ubuntu-16.04",cpu:"1",memory:"512",disk:"10"},hasCreated:!1,name:"",os:"ubuntu-16.04",cpu:"1",memory:"512",disk:"10",templates:[{text:"Ubuntu 16.04",value:"ubuntu/16.04"},{text:"Debian 9",value:"debian/9"},{text:"CentOS 7",value:"centos/7"},{text:"Fedora 29",value:"fedora/29"},{text:"Alpine 3.9",value:"alpine/3.9"}]}},computed:{active:{get:function(){return this.$store.state.instances.dialogs.create},set:function(e){e||this.closeDialog()}},items:function(){return this.$store.getters.instancesTableData},me:function(){return this.$store.getters["auth/me"]},canCreate:function(){return this.me.abilities.includes("instances_create")},computedHeaders:function(){var e=this;return this.headers.filter(function(t){return!(t.disk===e.showDisk||t.price===e.showPrice||t.type===e.showType||t.servers===e.me.admin)})},getMemory:function(){return this.$store.getters.appconfig.memory},getStorage:function(){return this.$store.getters.appconfig.storage},showPrice:function(){return"True"===this.$store.getters.appconfig.price.enabled},showDisk:function(){return"True"===this.$store.getters.appconfig.storage.enabled},showType:function(){return!1}},watch:{dialog:function(e){return e||this.close()}},methods:{getMemoryConfig:function(e){return e.config.limits_memory_raw&&i.i(o.f)(e.config.limits_memory_raw,this.getMemory.limits_unit,this.getMemory.limits_unit_show)},getStorageConfig:function(e){return"GiB"===this.getStorage.limits_unit?e.config.limits_disk_gib:e.config.limits_disk_gb},filterIpv6:function(e){return"link"===e.scope?"-":e.address},iconstate:function(e){switch(e){case"RUNNING":return"play_arrow";case"STOPPED":return"stop";default:return"pause"}},colorstate:function(e){switch(e){case"RUNNING":return"green";case"STOPPED":return"red";default:return"blue"}},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=n()({},e.defaultItem),e.editedIndex=-1},300)},refreshData:function(){this.$store.dispatch("fetchInstances")}},mounted:function(){var e=this;this.$store.dispatch("fetchInstances"),setTimeout(function(){e.editedItem=n()({},e.defaultItem),e.editedIndex=-1},300)}}},510:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(549),n=i.n(s);t.default={name:"instance",components:{instances:n.a},data:function(){return{}}}},549:function(e,t,i){var s=i(137)(i(480),i(609),null,null,null);e.exports=s.exports},602:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("instances")],1)},staticRenderFns:[]}},609:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"grid-list-md":""}},[i("order-create"),e._v(" "),i("v-card",[i("v-card-title",[i("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",small:"",color:"blue"},on:{click:e.refreshData}},[i("v-icon",[e._v("refresh")])],1),e._v(" "),i("v-btn",{staticClass:"mb-1",attrs:{color:"primary",dark:""},on:{click:function(t){return e.$store.dispatch("openInstanceCreateDialog")}}},[e._v(e._s(e.$t("instances.actions.new")))]),e._v(" "),i("v-spacer"),e._v(" "),i("v-text-field",{attrs:{"append-icon":"search",label:e.$t("actions.search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),e.items?i("v-data-table",{attrs:{headers:e.computedHeaders,items:e.items,search:e.search},scopedSlots:e._u([{key:"item.config.limits_memory",fn:function(t){var s=t.item;return[s.config.limits_memory?i("v-span",[e._v(e._s(e.getMemoryConfig(s)[0])+" "+e._s(e.getMemoryConfig(s)[1]))]):e._e()]}},{key:"item.config.limits_disk",fn:function(t){var s=t.item;return[s.config.limits_disk?i("v-span",[e._v(e._s(e.getStorageConfig(s))+" "+e._s(e.getStorage.limits_unit_show))]):e._e()]}},{key:"item.ips[0].address",fn:function(t){var s=t.item;return[s.ips[0]?i("v-span",[e._v(e._s(e.filterIpv6(s.ips[0])))]):e._e()]}},{key:"item.ips[1].address",fn:function(t){var s=t.item;return[s.ips[1]?i("v-span",[e._v(e._s(e.filterIpv6(s.ips[1])))]):e._e()]}},{key:"item.action",fn:function(t){var s=t.item;return[i("v-btn",{attrs:{color:"primary",small:"",left:"",to:"/instance/"+s.id}},[e._v(e._s(e.$t("instances.actions.manage")))])]}},{key:"item.status",fn:function(t){var s=t.item;return[i("v-icon",{attrs:{color:e.colorstate(s.status)}},[e._v(e._s(e.iconstate(s.status)))])]}}],null,!1,636964259)}):e._e()],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=7.c3954b5ea9a0e289fde3.js.map