webpackJsonp([0],{393:function(t,e,a){var s=a(137)(a(507),a(598),null,null,null);t.exports=s.exports},400:function(t,e,a){var s=a(137)(a(514),a(620),null,null,null);t.exports=s.exports},413:function(t,e,a){t.exports={default:a(421),__esModule:!0}},414:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=a(416),n=s(i),r=a(415),o=s(r);e.default=function(){function t(t,e){var a=[],s=!0,i=!1,n=void 0;try{for(var r,d=(0,o.default)(t);!(s=(r=d.next()).done)&&(a.push(r.value),!e||a.length!==e);s=!0);}catch(t){i=!0,n=t}finally{try{!s&&d.return&&d.return()}finally{if(i)throw n}}return a}return function(e,a){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},415:function(t,e,a){t.exports={default:a(419),__esModule:!0}},416:function(t,e,a){t.exports={default:a(420),__esModule:!0}},419:function(t,e,a){a(79),a(78),t.exports=a(423)},420:function(t,e,a){a(79),a(78),t.exports=a(424)},421:function(t,e,a){a(425),t.exports=a(2).Object.entries},422:function(t,e,a){var s=a(32),i=a(24),n=a(37).f;t.exports=function(t){return function(e){for(var a,r=i(e),o=s(r),d=o.length,c=0,l=[];d>c;)n.call(r,a=o[c++])&&l.push(t?[a,r[a]]:r[a]);return l}}},423:function(t,e,a){var s=a(16),i=a(138);t.exports=a(2).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return s(e.call(t))}},424:function(t,e,a){var s=a(80),i=a(5)("iterator"),n=a(31);t.exports=a(2).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||n.hasOwnProperty(s(e))}},425:function(t,e,a){var s=a(8),i=a(422)(!0);s(s.S,"Object",{entries:function(t){return i(t)}})},469:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Help",data:function(){return{hasSent:!1,subject:"",message:""}},methods:{me:function(){this.data=this.$store.getters["auth/me"]},clear:function(){this.$refs.form.reset()},save:function(){this.hasSent=!0,this.$store.dispatch("createRequests",{action:"help",message:this.subject,status:"waiting",meta_data:{text:this.message}}),this.$store.dispatch("notify",{id:0,message:""+this.$i18n.t("notifications.request_created"),color:""}),this.active=!1,this.subject="",this.message=""}}}},491:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(414),i=a.n(s),n=a(413),r=a.n(n),o=a(0),d=a.n(o);e.default={name:"Requests",data:function(){return{doAction:!1,search:"",pagination:{sortBy:"last_change",descending:"true",rowsPerPage:10},dialogMessage:!1,dialogDetail:!1,dialogCancel:!1,dialogConfirm:!1,dialogDelete:!1,message_cancel:"Cancel this request",headers:[{text:"Id",value:"id",width:"5%"},{text:this.$t("requests.user"),value:"users",width:"5%",user:!1},{text:this.$t("requests.action"),sortable:!0,value:"action",width:"5%"},{text:this.$t("requests.status"),value:"status",width:"5%"},{text:this.$t("requests.message"),value:"message",width:"25%"},{text:this.$t("requests.changed"),value:"last_change",width:"25%"},{text:this.$t("requests.actions"),value:"actions",sortable:!1,width:"15%"}],valid:!1,editedItemId:-1,editedIndex:-1,editedItem:{action:"",status:"",message:"",meta_data:"",changed_on:"",created_on:""},defaultItem:{action:"",status:"",message:"",meta_data:"",changed_on:"",created_on:""}}},watch:{dialog:function(t){return t||this.close()}},methods:{formatDate:function(t){return t?t.substring(0,t.length-5):"-"},formatMetaData:function(t){return t||""},editItem:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=d()({},t),this.editedItemId=t.id,this.editedItem.status="answered",this.dialogMessage=!0},confirmItem:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=d()({},t),this.editedItemId=t.id,this.editedItem.status="confirmed",this.dialogConfirm=!0},detailItem:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=d()({},t),this.dialogDetail=!0},cancelItem:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=d()({},t),this.editedItemId=t.id,this.editedItem.status="cancelled",this.editedItem.message=this.message_cancel,this.dialogCancel=!0},deleteDialog:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=d()({},t),this.dialogDelete=!0},deleteItem:function(){var t=this;if(this.editedIndex>-1){var e=this.editedItem,a=this.items.indexOf(e);this.items.splice(a,1),this.$store.dispatch("deleteRequests",e.id),setTimeout(function(){t.$store.dispatch("fetchRequests")},500)}},close:function(){var t=this;this.dialogMessage=!1,this.dialogDetail=!1,this.dialogCancel=!1,this.dialogConfirm=!1,setTimeout(function(){t.editedItem=d()({},t.defaultItem),t.editedIndex=-1},300)},save:function(){var t=this,e="";r()(this.editedItem.meta_data).forEach(function(t){var a=i()(t,2),s=a[0],n=a[1];e+=s+": "+n+" <br>"});var a=""+this.$i18n.t("requests.mail_message",[this.getProductionName,this.editedItem.action,this.editedItem.status,e]);this.$store.dispatch("changeRequests",{id:this.editedItemId,message:this.editedItem.message,status:this.editedItem.status,mail_message:a}),setTimeout(function(){t.$store.dispatch("fetchRequests")},500),this.close()},saveConfirm:function(){var t=this,e="";r()(this.editedItem.meta_data).forEach(function(t){var a=i()(t,2),s=a[0],n=a[1];e+=s+": "+n+" <br>"});var a=""+this.$i18n.t("requests.mail_message",[this.getProductionName,this.editedItem.action,this.editedItem.status,e]);this.$store.dispatch("changeRequests",{id:this.editedItemId,message:this.editedItem.message,status:this.editedItem.status,mail_message:a}),this.doAction&&("create"===this.editedItem.action&&this.$store.dispatch("createInstance",this.editedItem.meta_data),"upgrade"===this.editedItem.action&&this.$store.dispatch("upgradeInstance",this.editedItem.meta_data),"clone"===this.editedItem.action&&this.$store.dispatch("cloneInstance",this.editedItem.meta_data),"delete"===this.editedItem.action&&this.$store.dispatch("deleteInstance",this.editedItem.meta_data.id)),setTimeout(function(){t.$store.dispatch("fetchRequests")},500),this.close()},refreshData:function(){this.$store.dispatch("fetchRequests")}},computed:{items:function(){return this.$store.getters.requestsTableData},me:function(){return this.$store.getters["auth/me"]},computedHeaders:function(){var t=this;return this.headers.filter(function(e){return!(e.user===t.me.admin)})},getProductionName:function(){return this.$store.getters.appconfig.app.production_name}},created:function(){this.$store.dispatch("fetchRequests")}}},507:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(538),i=a.n(s);e.default={name:"container",components:{help:i.a},data:function(){return{}}}},514:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(560),i=a.n(s);e.default={name:"container",components:{requests:i.a},data:function(){return{}}}},538:function(t,e,a){var s=a(137)(a(469),a(590),null,null,null);t.exports=s.exports},560:function(t,e,a){var s=a(137)(a(491),a(586),null,null,null);t.exports=s.exports},586:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-card",[a("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",small:"",color:"blue"},on:{click:t.refreshData}},[a("v-icon",[t._v("refresh")])],1),t._v(" "),a("v-card-title",[a("v-dialog",{attrs:{"max-width":"520"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Are you sure to delete request from history?")]),t._v(" "),a("v-card-text",[t._v("This action cannot by undo.")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialogDelete=!1}}},[t._v("Disagree")]),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialogDelete=!1}},nativeOn:{click:function(e){return t.deleteItem(e)}}},[t._v("Agree")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogConfirm,callback:function(e){t.dialogConfirm=e},expression:"dialogConfirm"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Confirm Request")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t._v("\n                Metadata:\n              ")]),t._v(" "),a("v-flex",[a("ul",{attrs:{id:"metadataconfirm"}},t._l(t.formatMetaData(t.editedItem.meta_data),function(e,s){return a("li",{key:s},[t._v("\n                    "+t._s(s)+": "+t._s(e)+"\n                  ")])}),0)]),t._v(" "),a("v-flex",[a("v-checkbox",{attrs:{label:"Do action: "+t.editedItem.message},model:{value:t.doAction,callback:function(e){t.doAction=e},expression:"doAction"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Close")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.saveConfirm}},[t._v("Confirm")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogMessage,callback:function(e){t.dialogMessage=e},expression:"dialogMessage"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Message"},model:{value:t.editedItem.message,callback:function(e){t.$set(t.editedItem,"message",e)},expression:"editedItem.message"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Close")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Send")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogCancel,callback:function(e){t.dialogCancel=e},expression:"dialogCancel"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Cancel Request")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Message"},model:{value:t.message_cancel,callback:function(e){t.message_cancel=e},expression:"message_cancel"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Close")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Cancel request")])],1)],1)],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDetail,callback:function(e){t.dialogDetail=e},expression:"dialogDetail"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Request Detail")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Action"},model:{value:t.editedItem.action,callback:function(e){t.$set(t.editedItem,"action",e)},expression:"editedItem.action"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Status"},model:{value:t.editedItem.status,callback:function(e){t.$set(t.editedItem,"status",e)},expression:"editedItem.status"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Message"},model:{value:t.editedItem.message,callback:function(e){t.$set(t.editedItem,"message",e)},expression:"editedItem.message"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{value:t.formatDate(t.editedItem.created_on),label:"Created"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{value:t.formatDate(t.editedItem.changed_on),label:"Changed"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[t._v("\n                Metadata:\n              ")]),t._v(" "),a("v-flex",[a("ul",{attrs:{id:"metadata"}},t._l(t.formatMetaData(t.editedItem.meta_data),function(e,s){return a("li",{key:s},[t._v("\n                    "+t._s(s)+": "+t._s(e)+"\n                  ")])}),0)])],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Close")])],1)],1)],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-text-field",{attrs:{"append-icon":"search",label:t.$t("actions.search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),t.items?a("v-data-table",{attrs:{headers:t.computedHeaders,items:t.items,search:t.search},scopedSlots:t._u([{key:"item.users",fn:function(e){var s=e.item;return t._l(s.users,function(e){return a("span",[a("v-chip",{attrs:{small:""}},[t._v(t._s(e.name))])],1)})}},{key:"item.last_change",fn:function(e){var a=e.item;return[t._v("\n      "+t._s(t.formatDate(a.last_change))+"\n    ")]}},{key:"item.actions",fn:function(e){var s=e.item;return[t.me.admin?a("v-icon",{attrs:{disabled:"confirmed"===s.status||"cancelled"===s.status},on:{click:function(e){return t.confirmItem(s)}}},[t._v("\n            check\n          ")]):t._e(),t._v(" "),a("v-icon",{attrs:{disabled:"confirmed"===s.status},on:{click:function(e){return t.editItem(s)}}},[t._v("\n            message\n          ")]),t._v(" "),a("v-icon",{attrs:{disabled:"cancelled"===s.status||"confirmed"===s.status},on:{click:function(e){return t.cancelItem(s)}}},[t._v("\n            cancel\n          ")]),t._v(" "),a("v-icon",{on:{click:function(e){return t.detailItem(s)}}},[t._v("\n            more\n          ")]),t._v(" "),t.me.admin?a("v-icon",{on:{click:function(e){return t.deleteDialog(s)}}},[t._v("\n            delete\n          ")]):t._e()]}}],null,!1,2669052565)},[t._v(" "),t._v(" "),t._v(" "),a("template",{slot:"no-data"},[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("Reset")])],1)],2):t._e()],1)],1)},staticRenderFns:[]}},590:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-md":""}},[a("v-card",{staticClass:"hide-overflow"},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-app-bar",{attrs:{flat:"",color:""}},[a("v-icon",[t._v("mdi-account")]),t._v(" "),a("v-toolbar-title",{staticClass:"font-weight-light"},[t._v(t._s(t.$t("help.title")))]),t._v(" "),a("v-spacer")],1),t._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:t.$t("help.subject")},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}}),t._v(" "),a("v-textarea",{attrs:{label:t.$t("help.message")},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"grey",dark:""},on:{click:t.clear}},[t._v("\n        "+t._s(t.$t("actions.cancel"))+"\n      ")]),t._v(" "),a("v-btn",{attrs:{color:"success"},on:{click:t.save}},[t._v("\n        "+t._s(t.$t("actions.save"))+"\n      ")])],1)],1)],1)],1)},staticRenderFns:[]}},598:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("help")],1)},staticRenderFns:[]}},620:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("requests")],1)},staticRenderFns:[]}}});
//# sourceMappingURL=0.482fc3ba7be96775e677.js.map