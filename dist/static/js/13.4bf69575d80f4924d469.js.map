{"version":3,"sources":["webpack:///static/js/13.4bf69575d80f4924d469.js","webpack:///./src/views/layouts/LoginOtp.vue","webpack:///LoginOtp.vue","webpack:///./src/views/layouts/LoginOtp.vue?709e"],"names":["webpackJsonp","389","module","exports","__webpack_require__","Component","503","__webpack_exports__","Object","defineProperty","value","578","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","$event","preventDefault","submit","_v","errors","secret","model","callback","$$v","expression","loading","message","_s","_e","alert","$t","staticRenderFns"],"mappings":"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","file":"static/js/13.4bf69575d80f4924d469.js","sourcesContent":["webpackJsonp([13],{\n\n/***/ 389:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(137)(\n  /* script */\n  __webpack_require__(503),\n  /* template */\n  __webpack_require__(578),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 503:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'login',\n  title: 'Login',\n  data: function data() {\n    return {\n      drawer: null,\n      secret: '',\n      alert: 'true',\n      enabled: false,\n      errors: {\n        secret: null,\n        message: null\n      },\n      loading: false,\n      passwordIcon: true\n    };\n  },\n\n  computed: {\n    logout: function logout() {\n      return this.$store.state.route.query.logout;\n    }\n  },\n  watch: {\n    secret: function secret(_secret) {\n      if (_secret !== '') {\n        this.errors.secret = false;\n      }\n    }\n  },\n  methods: {\n    appendIcon: function appendIcon() {\n      this.passwordIcon = !this.passwordIcon;\n    },\n    submit: function submit() {\n      var _this = this;\n\n      var error = false;\n      console.log('submit otp');\n      if (!this.secret || this.secret === '') {\n        this.errors.secret = 'Secret code is required';\n        error = true;\n      }\n\n      if (error) {\n        return;\n      }\n\n      this.errors.message = null;\n      this.loading = true;\n\n      var data = {\n        secret: this.secret\n      };\n\n      this.$store.dispatch('auth/otpToken', data).then(function () {\n        // check login state\n        _this.$store.dispatch('auth/checkToken').then(function (valid) {\n          // eslint-disable-line consistent-return\n          // authorized\n          if (valid) {\n            _this.$router.replace({ path: _this.$route.query.redirect || '/' });\n            // console.log('prihlasenie ok');\n          } else {\n            // unauthorized\n            _this.errors.message = 'Unvalid credentials. Please try again.';\n            console.log('⛔️  Unauthorized');\n            _this.secret = '';\n          }\n          _this.loading = false;\n        });\n      }).catch(function (err) {\n        // nic nezachyti ked zle heslo ?\n        console.log('chytil error');\n        console.log(err);\n        _this.errors.message = 'Something went wrong!';\n        _this.loading = false;\n        _this.password = '';\n        _this.username = '';\n        _this.secret = '';\n\n        switch (err.response && err.response.status) {\n          case 401:\n            _this.errors.message = 'Unvalid secret. Please try again.';\n            break;\n          default:\n          case 500:\n            _this.errors.message = 'Internal server error. Please try again.';\n            break;\n        }\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 578:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('v-app', {\n    attrs: {\n      \"id\": \"inspire\"\n    }\n  }, [_c('v-content', [_c('v-container', {\n    attrs: {\n      \"fluid\": \"\",\n      \"fill-height\": \"\"\n    }\n  }, [_c('v-layout', {\n    attrs: {\n      \"align-center\": \"\",\n      \"justify-center\": \"\"\n    }\n  }, [_c('v-flex', {\n    attrs: {\n      \"xs10\": \"\",\n      \"sm6\": \"\",\n      \"md3\": \"\"\n    }\n  }, [_c('v-card', {\n    staticClass: \"elevation-12\",\n    attrs: {\n      \"color\": \"blue\",\n      \"dark\": \"\"\n    }\n  }, [_c('form', {\n    attrs: {\n      \"action\": \"#\",\n      \"autocomplete\": \"off\"\n    },\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        return _vm.submit($event)\n      }\n    }\n  }, [_c('v-toolbar', {\n    attrs: {\n      \"dark\": \"\",\n      \"color\": \"blue darken-3\"\n    }\n  }, [_c('v-toolbar-title', [_vm._v(\"2-step Verification\")])], 1), _vm._v(\" \"), _c('v-card-text', [_c('v-text-field', {\n    attrs: {\n      \"id\": \"password\",\n      \"color\": \"grey lighten-1\",\n      \"name\": \"secret\",\n      \"label\": \"Enter 6 chars or digits code\",\n      \"prepend-icon\": \"lock\",\n      \"autocomplete\": \"off\",\n      \"type\": \"text\",\n      \"error\": _vm.errors.secret\n    },\n    model: {\n      value: (_vm.secret),\n      callback: function($$v) {\n        _vm.secret = $$v\n      },\n      expression: \"secret\"\n    }\n  })], 1), _vm._v(\" \"), _c('v-card-actions', [_c('v-btn', {\n    attrs: {\n      \"block\": \"\",\n      \"color\": \"green\",\n      \"type\": \"submit\",\n      \"secondary\": \"\",\n      \"loading\": _vm.loading,\n      \"disabled\": _vm.loading\n    }\n  }, [_vm._v(\"Login\")])], 1)], 1)]), _vm._v(\" \"), (_vm.errors.message) ? _c('v-alert', {\n    attrs: {\n      \"error\": \"\",\n      \"value\": _vm.errors.message\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(this.errors.message) + \"\\n          \")]) : _vm._e(), _vm._v(\" \"), (_vm.logout) ? _c('v-alert', {\n    attrs: {\n      \"info\": \"\",\n      \"dismissible\": \"\"\n    },\n    model: {\n      value: (_vm.alert),\n      callback: function($$v) {\n        _vm.alert = $$v\n      },\n      expression: \"alert\"\n    }\n  }, [_vm._v(_vm._s(_vm.$t('messages.logged_out')))]) : _vm._e()], 1)], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/13.4bf69575d80f4924d469.js","var Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./LoginOtp.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1754a4c4\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./LoginOtp.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/layouts/LoginOtp.vue\n// module id = 389\n// module chunks = 13","<template>\n  <v-app id=\"inspire\">\n    <v-content>\n      <v-container fluid fill-height>\n        <v-layout align-center justify-center>\n          <v-flex xs10 sm6 md3>\n            <v-card color=\"blue\" dark class=\"elevation-12\">\n              <form action=\"#\" autocomplete=\"off\" @submit.prevent=\"submit\">\n              <v-toolbar dark color=\"blue darken-3\">\n                <v-toolbar-title>2-step Verification</v-toolbar-title>\n              </v-toolbar>\n              <v-card-text>\n                  <v-text-field\n                    id=\"password\"\n                    color=\"grey lighten-1\"\n                    name=\"secret\"\n                    label=\"Enter 6 chars or digits code\"\n                    v-model=\"secret\"\n                    prepend-icon=\"lock\"\n                    autocomplete=\"off\"\n                    type=\"text\"\n                    :error=\"errors.secret\"\n                  ></v-text-field>\n              </v-card-text>\n              <v-card-actions>\n                <v-btn\n                  block\n                  color=\"green\"\n                  type=\"submit\"\n                  secondary\n                  :loading=\"loading\"\n                  :disabled=\"loading\">Login</v-btn>\n              </v-card-actions>\n              </form>\n            </v-card>\n            <v-alert error v-if=\"errors.message\" :value=\"errors.message\">\n              {{ this.errors.message }}\n            </v-alert>\n            <v-alert v-if=\"logout\" info v-model=\"alert\" dismissible>{{ $t('messages.logged_out') }}</v-alert>\n          </v-flex>\n        </v-layout>\n      </v-container>\n    </v-content>\n  </v-app>\n</template>\n\n\n<script>\n  export default {\n    name: 'login',\n    title: 'Login',\n    data() {\n      return {\n        drawer: null,\n        secret: '',\n        alert: 'true',\n        enabled: false,\n        errors: {\n          secret: null,\n          message: null\n        },\n        loading: false,\n        passwordIcon: true\n      };\n    },\n    computed: {\n      logout() {\n        return this.$store.state.route.query.logout;\n      }\n    },\n    watch: {\n      secret(secret) {\n        if (secret !== '') {\n          this.errors.secret = false;\n        }\n      }\n    },\n    methods: {\n      appendIcon() {\n        this.passwordIcon = !this.passwordIcon;\n      },\n      submit() {\n        let error = false;\n        console.log('submit otp');\n        if (!this.secret || this.secret === '') {\n          this.errors.secret = 'Secret code is required';\n          error = true;\n        }\n\n        if (error) { return; }\n\n        this.errors.message = null;\n        this.loading = true;\n\n        const data = {\n          secret: this.secret\n        };\n\n        this.$store.dispatch('auth/otpToken', data)\n          .then(() => {\n            // check login state\n            this.$store.dispatch('auth/checkToken')\n              .then((valid) => { // eslint-disable-line consistent-return\n                // authorized\n                if (valid) {\n                  this.$router.replace({ path: this.$route.query.redirect || '/' });\n                  // console.log('prihlasenie ok');\n                } else {\n                  // unauthorized\n                  this.errors.message = 'Unvalid credentials. Please try again.';\n                  console.log('⛔️  Unauthorized');\n                  this.secret = '';\n                }\n                this.loading = false;\n              });\n          })\n          .catch((err) => {\n            // nic nezachyti ked zle heslo ?\n            console.log('chytil error');\n            console.log(err);\n            this.errors.message = 'Something went wrong!';\n            this.loading = false;\n            this.password = '';\n            this.username = '';\n            this.secret = '';\n\n            switch (err.response && err.response.status) {\n              case 401:\n                this.errors.message = 'Unvalid secret. Please try again.';\n                break;\n              default:\n              case 500:\n                this.errors.message = 'Internal server error. Please try again.';\n                break;\n            }\n          });\n      }\n    }\n  };\n</script>\n\n\n\n// WEBPACK FOOTER //\n// LoginOtp.vue?2f583194","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('v-app', {\n    attrs: {\n      \"id\": \"inspire\"\n    }\n  }, [_c('v-content', [_c('v-container', {\n    attrs: {\n      \"fluid\": \"\",\n      \"fill-height\": \"\"\n    }\n  }, [_c('v-layout', {\n    attrs: {\n      \"align-center\": \"\",\n      \"justify-center\": \"\"\n    }\n  }, [_c('v-flex', {\n    attrs: {\n      \"xs10\": \"\",\n      \"sm6\": \"\",\n      \"md3\": \"\"\n    }\n  }, [_c('v-card', {\n    staticClass: \"elevation-12\",\n    attrs: {\n      \"color\": \"blue\",\n      \"dark\": \"\"\n    }\n  }, [_c('form', {\n    attrs: {\n      \"action\": \"#\",\n      \"autocomplete\": \"off\"\n    },\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        return _vm.submit($event)\n      }\n    }\n  }, [_c('v-toolbar', {\n    attrs: {\n      \"dark\": \"\",\n      \"color\": \"blue darken-3\"\n    }\n  }, [_c('v-toolbar-title', [_vm._v(\"2-step Verification\")])], 1), _vm._v(\" \"), _c('v-card-text', [_c('v-text-field', {\n    attrs: {\n      \"id\": \"password\",\n      \"color\": \"grey lighten-1\",\n      \"name\": \"secret\",\n      \"label\": \"Enter 6 chars or digits code\",\n      \"prepend-icon\": \"lock\",\n      \"autocomplete\": \"off\",\n      \"type\": \"text\",\n      \"error\": _vm.errors.secret\n    },\n    model: {\n      value: (_vm.secret),\n      callback: function($$v) {\n        _vm.secret = $$v\n      },\n      expression: \"secret\"\n    }\n  })], 1), _vm._v(\" \"), _c('v-card-actions', [_c('v-btn', {\n    attrs: {\n      \"block\": \"\",\n      \"color\": \"green\",\n      \"type\": \"submit\",\n      \"secondary\": \"\",\n      \"loading\": _vm.loading,\n      \"disabled\": _vm.loading\n    }\n  }, [_vm._v(\"Login\")])], 1)], 1)]), _vm._v(\" \"), (_vm.errors.message) ? _c('v-alert', {\n    attrs: {\n      \"error\": \"\",\n      \"value\": _vm.errors.message\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(this.errors.message) + \"\\n          \")]) : _vm._e(), _vm._v(\" \"), (_vm.logout) ? _c('v-alert', {\n    attrs: {\n      \"info\": \"\",\n      \"dismissible\": \"\"\n    },\n    model: {\n      value: (_vm.alert),\n      callback: function($$v) {\n        _vm.alert = $$v\n      },\n      expression: \"alert\"\n    }\n  }, [_vm._v(_vm._s(_vm.$t('messages.logged_out')))]) : _vm._e()], 1)], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-1754a4c4\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/layouts/LoginOtp.vue\n// module id = 578\n// module chunks = 13"],"sourceRoot":""}