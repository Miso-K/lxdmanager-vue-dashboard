webpackJsonp([4],{389:function(e,t,s){var i=s(137)(s(457),s(531),null,null,null);e.exports=i.exports},394:function(e,t,s){e.exports={default:s(400),__esModule:!0}},395:function(e,t,s){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=s(397),r=i(n),a=s(396),o=i(a);t.default=function(){function e(e,t){var s=[],i=!0,n=!1,r=void 0;try{for(var a,c=(0,o.default)(e);!(i=(a=c.next()).done)&&(s.push(a.value),!t||s.length!==t);i=!0);}catch(e){n=!0,r=e}finally{try{!i&&c.return&&c.return()}finally{if(n)throw r}}return s}return function(t,s){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return e(t,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},396:function(e,t,s){e.exports={default:s(398),__esModule:!0}},397:function(e,t,s){e.exports={default:s(399),__esModule:!0}},398:function(e,t,s){s(79),s(78),e.exports=s(402)},399:function(e,t,s){s(79),s(78),e.exports=s(403)},400:function(e,t,s){s(404),e.exports=s(0).Object.entries},401:function(e,t,s){var i=s(31),n=s(22),r=s(37).f;e.exports=function(e){return function(t){for(var s,a=n(t),o=i(a),c=o.length,l=0,u=[];c>l;)r.call(a,s=o[l++])&&u.push(e?[s,a[s]]:a[s]);return u}}},402:function(e,t,s){var i=s(11),n=s(138);e.exports=s(0).getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},403:function(e,t,s){var i=s(81),n=s(2)("iterator"),r=s(30);e.exports=s(0).isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||r.hasOwnProperty(i(t))}},404:function(e,t,s){var i=s(7),n=s(401)(!0);i(i.S,"Object",{entries:function(e){return n(e)}})},406:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(395),n=s.n(i),r=s(394),a=s.n(r);t.default={components:{},data:function(){return{hasCreated:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length>=3||"Name must be more than 3 characters"}],valid:!1,showIspconfig:!1,ispconfig:"no",period:{text:"1 Month",value:1},os:"",cpu:"1",memory:"512",disk:"10",periodes:[{text:"1 Month",value:1},{text:"3 Months",value:1},{text:"6 Months",value:.95},{text:"12 Months",value:.9},{text:"24 Months",value:.8}],owners:"",price:""}},computed:{active:{get:function(){return this.$store.state.instances.dialogs.create},set:function(e){e||this.closeDialog()}},showPrice:function(){return"True"===this.$store.getters.appconfig.price.enabled},templates:function(){return this.$store.getters.imagesTableData.filter(function(e){return""!==e.name}).map(function(e){return{text:e.alias_description?e.alias_description:e.name,value:e.name}})},getPrice:function(){return this.$store.getters.appconfig.price},getMemory:function(){return this.$store.getters.appconfig.memory},getStorage:function(){return this.$store.getters.appconfig.storage},diskEnabled:function(){return!!this.getStorage&&"True"===this.$store.getters.appconfig.storage.enabled},me:function(){return this.$store.getters["auth/me"]},canCreate:function(){return this.me.abilities.includes("instances_create")},usersId:function(){return this.$store.getters.usersTableData.map(function(e){return{name:e.name,id:e.id}})},getProductionName:function(){return this.$store.getters.appconfig.app.production_name},calcPrice:{get:function(){var e=this.getPrice.cpu*this.cpu,t=this.getPrice.memory*this.memory,s=this.getPrice.disk*this.disk,i=this.period.value,n=(e+t+s)*i;return this.price=n.toFixed(2),n.toFixed(2)},set:function(e){return this.price=parseFloat(e).toFixed(2),parseFloat(e).toFixed(2)}}},methods:{removeUsers:function(e){var t=this.owners.findIndex(function(t){return t===e.id});t>=0&&this.owners.splice(t,1)},setVPS:function(e){switch(e){case 1:this.cpu=1,this.memory=512,this.disk=10;break;case 2:this.cpu=1,this.memory=1024,this.disk=30;break;case 3:this.cpu=2,this.memory=2048,this.disk=50;break;case 4:this.cpu=4,this.memory=8172,this.disk=160;break;default:this.cpu=1,this.memory=512,this.disk=10}},closeDialog:function(){this.step=0,this.$store.dispatch("closeInstanceCreateDialog")},save:function(){var e=this;if(this.$refs.form.validate()){if(this.name){var t={name:this.name,os:this.os,cpu:this.cpu,memory:""+this.memory+this.getMemory.limits_unit,disk:""+this.disk+this.getStorage.limits_unit,pool_name:"True"===this.getStorage.enabled?this.getStorage.pool_name:"",period:this.showPrice?this.period.text:"",price:this.showPrice?this.price:"",users:this.owners};this.canCreate?(this.$store.dispatch("createInstance",t),setTimeout(function(){e.$store.dispatch("fetchInstances")},500)):this.sendRequest(t)}this.active=!1}},sendRequest:function(e){if(""!==this.name){var t=e;t.users=[this.me.id],t.users_name=[this.me.username];var s="";a()(t).forEach(function(e){var t=n()(e,2),i=t[0],r=t[1];s+=i+": "+r+" <br>"});var i=""+this.$i18n.t("requests.mail_message",[this.getProductionName,"create","waiting",s]);this.$store.dispatch("createRequests",{action:"create",message:"Create new instance "+this.name,status:"waiting",meta_data:t,mail_message:i}),this.$store.dispatch("notify",{id:0,message:""+this.$i18n.t("notifications.request_created"),color:""}),this.active=!1}}},created:function(){this.$store.dispatch("fetchImages")}}},408:function(e,t,s){var i=s(137)(s(406),s(410),null,null,null);e.exports=i.exports},410:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-layout",{attrs:{row:"","justify-center":""}},[s("v-dialog",{attrs:{"max-width":"800px"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[s("v-card",[s("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-card-title",[s("span",{staticClass:"headline"},[e._v(e._s(e.$t("instances.order.new")))])]),e._v(" "),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{rules:e.nameRules,label:e.$t("instances.order.instance_name.label"),required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-select",{attrs:{items:e.templates,rules:[function(e){return!!e||"Item is required"}],required:"",label:e.$t("instances.order.os.label")},model:{value:e.os,callback:function(t){e.os=t},expression:"os"}})],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:""}},[s("v-btn",{attrs:{block:"",large:"",value:"vps1"},on:{click:function(t){return e.setVPS(1)}}},[e._v("\n                  VPS1\n                ")])],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:""}},[s("v-btn",{attrs:{block:"",large:"",value:"vps1"},on:{click:function(t){return e.setVPS(2)}}},[e._v("\n                  VPS2\n                ")])],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:""}},[s("v-btn",{attrs:{block:"",large:"",value:"vps1"},on:{click:function(t){return e.setVPS(3)}}},[e._v("\n                  VPS3\n                ")])],1),e._v(" "),s("v-flex",{attrs:{xs3:"",sm3:""}},[s("v-btn",{attrs:{block:"",large:"",value:"vps1"},on:{click:function(t){return e.setVPS(4)}}},[e._v("\n                  VPS4\n                ")])],1),e._v(" "),s("v-flex",{attrs:{xs10:""}},[s("v-slider",{attrs:{min:"1",max:"4",step:"1",label:e.$t("instances.order.cpu.label")},model:{value:e.cpu,callback:function(t){e.cpu=t},expression:"cpu"}})],1),e._v(" "),s("v-flex",{attrs:{xs2:""}},[s("v-text-field",{attrs:{type:"CPUs",suffix:"CPUs"},model:{value:e.cpu,callback:function(t){e.cpu=t},expression:"cpu"}})],1),e._v(" "),s("v-flex",{attrs:{xs10:""}},[s("v-slider",{attrs:{min:"512",max:"8192",step:"512",label:e.$t("instances.order.memory.label")},model:{value:e.memory,callback:function(t){e.memory=t},expression:"memory"}})],1),e._v(" "),s("v-flex",{attrs:{xs2:""}},[s("v-text-field",{attrs:{type:"MB",suffix:e.getMemory.limits_unit_show},model:{value:e.memory,callback:function(t){e.memory=t},expression:"memory"}})],1),e._v(" "),s("v-flex",{attrs:{xs10:""}},[e.diskEnabled?s("v-slider",{attrs:{min:"10",max:"500",step:"5",label:e.$t("instances.order.disk.label")},model:{value:e.disk,callback:function(t){e.disk=t},expression:"disk"}}):e._e()],1),e._v(" "),s("v-flex",{attrs:{xs2:""}},[e.diskEnabled?s("v-text-field",{attrs:{type:"Disk",suffix:e.getStorage.limits_unit_show},model:{value:e.disk,callback:function(t){e.disk=t},expression:"disk"}}):e._e()],1),e._v(" "),s("v-flex",{attrs:{xs12:""}},[e.showIspconfig?s("v-radio-group",{model:{value:e.ispconfig,callback:function(t){e.ispconfig=t},expression:"ispconfig"}},[s("v-radio",{attrs:{value:"yes",label:"Install ISPconfig"}}),e._v(" "),s("v-radio",{attrs:{value:"no",label:"Do not Install ISPconfig"}})],1):e._e()],1),e._v(" "),e.showPrice?[s("v-flex",{attrs:{xs3:""}},[s("v-subheader",[e._v(e._s(e.$t("instances.order.payment_period.label")))])],1),e._v(" "),s("v-flex",{attrs:{xs3:""}},[s("v-select",{attrs:{items:e.periodes,"item-text":"text","item-value":"value","return-object":"",label:"Period"},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}})],1),e._v(" "),s("v-flex",{attrs:{xs4:""}},[s("v-subheader",[e._v(e._s(e.$t("instances.order.calculated_price.label")))])],1),e._v(" "),s("v-flex",{attrs:{xs2:""}},[s("v-text-field",{attrs:{suffix:"€",label:"Price per month",disabled:!e.me.admin},model:{value:e.calcPrice,callback:function(t){e.calcPrice=t},expression:"calcPrice"}})],1)]:e._e(),e._v(" "),e.me.admin?[s("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[s("v-autocomplete",{attrs:{disabled:!e.me.admin,items:e.usersId,chips:"",color:"blue-grey lighten-2",label:"New owners","item-text":"name","item-value":"id",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(t){return[s("v-chip",{staticClass:"chip--select-multi",attrs:{"input-value":t.selected,close:""},on:{"click:close":function(s){return e.removeUsers(t.item)}}},[e._v("\n                    "+e._s(t.item.name)+"\n                  ")])]}},{key:"item",fn:function(t){return[[s("v-list-tile-content",{domProps:{textContent:e._s(t.item.name)}})]]}}],null,!1,3128760912),model:{value:e.owners,callback:function(t){e.owners=t},expression:"owners"}})],1)]:e._e()],2)],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},nativeOn:{click:function(t){e.active=!1}}},[e._v(e._s(e.$t("actions.close")))]),e._v(" "),s("v-btn",{attrs:{color:"green darken-1",text:"",disabled:!e.valid},on:{click:e.save}},[e._v(e._s(e.$t("actions.create")))])],1)],1)],1)],1)],1)},staticRenderFns:[]}},433:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(1),n=s.n(i),r=s(408),a=s.n(r);t.default={name:"Instances",components:{"order-create":a.a},data:function(){return{search:"",pagination:{sortBy:"name",rowsPerPage:15},dialog:!1,dialogDelete:!1,headers:[{text:this.$t("actions.name"),align:"left",value:"action",class:"pl-4",sortable:!1},{text:this.$t("stats.status"),align:"left",value:"status",class:"pl-0",sortable:!1},{text:this.$t("stats.name"),align:"left",value:"name",class:"pa-1"},{text:this.$tc("stats.cpu",1)+"·s",align:"left",value:"config.limits_cpu",sortable:!1,class:"pa-1"},{text:this.$t("stats.memory_limit"),align:"left",value:"config.limits_memory",class:"pa-1"},{text:this.$t("stats.disk_limit"),align:"left",value:"config.limits_disk",disk:!1,class:"pa-1"},{text:"IPv4",align:"left",value:"ips[0].address",sortable:!1,class:"pa-1"},{text:"IPv6",align:"left",value:"ips[1].address",sortable:!1,class:"pa-1"},{text:"Price €",align:"left",value:"config.user_price",sortable:!0,price:!1,class:"pa-1"},{text:"Type",align:"left",value:"type",sortable:!0,type:!1,class:"pa-1"}],editedIndex:-1,editedItem:{name:"",os:"",cpu:"",memory:"",disk:""},defaultItem:{name:"",os:"ubuntu-16.04",cpu:"1",memory:"512",disk:"10"},hasCreated:!1,name:"",os:"ubuntu-16.04",cpu:"1",memory:"512",disk:"10",templates:[{text:"Ubuntu 16.04",value:"ubuntu/16.04"},{text:"Debian 9",value:"debian/9"},{text:"CentOS 7",value:"centos/7"},{text:"Fedora 29",value:"fedora/29"},{text:"Alpine 3.9",value:"alpine/3.9"}]}},computed:{active:{get:function(){return this.$store.state.instances.dialogs.create},set:function(e){e||this.closeDialog()}},items:function(){return console.log(this.$store.getters.instancesTableData),this.$store.getters.instancesTableData},me:function(){return this.$store.getters["auth/me"]},canCreate:function(){return this.me.abilities.includes("instances_create")},computedHeaders:function(){var e=this;return this.headers.filter(function(t){return!(t.disk===e.showDisk||t.price===e.showPrice||t.type===e.showType)})},getMemory:function(){return this.$store.getters.appconfig.memory},getStorage:function(){return this.$store.getters.appconfig.storage},showPrice:function(){return"True"===this.$store.getters.appconfig.price.enabled},showDisk:function(){return"True"===this.$store.getters.appconfig.storage.enabled},showType:function(){return!1}},watch:{dialog:function(e){return e||this.close()}},methods:{getMemoryConfig:function(e){return"MiB"===this.getMemory.limits_unit?e.config.limits_memory_mib:e.config.limits_memory_mb},getStorageConfig:function(e){return"GiB"===this.getStorage.limits_unit?e.config.limits_disk_gib:e.config.limits_disk_gb},filterIpv6:function(e){return"link"===e.scope?"":e.address},iconstate:function(e){switch(e){case"RUNNING":return"play_arrow";case"STOPPED":return"stop";default:return"pause"}},colorstate:function(e){switch(e){case"RUNNING":return"green";case"STOPPED":return"red";default:return"blue"}},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=n()({},e.defaultItem),e.editedIndex=-1},300)},refreshData:function(){this.$store.dispatch("fetchInstances")}},created:function(){var e=this;this.$store.getters.instancesTableData||(this.$store.dispatch("fetchInstances"),setTimeout(function(){e.editedItem=n()({},e.defaultItem),e.editedIndex=-1},300),console.log("fetched")),this.$store.dispatch("fetchInstances")}}},457:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(487),n=s.n(i);t.default={name:"instance",components:{instances:n.a},data:function(){return{}}}},487:function(e,t,s){var i=s(137)(s(433),s(538),null,null,null);e.exports=i.exports},531:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("instances")],1)},staticRenderFns:[]}},538:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"grid-list-md":""}},[s("order-create"),e._v(" "),s("v-card",[s("v-card-title",[s("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",small:"",color:"blue"},on:{click:e.refreshData}},[s("v-icon",[e._v("refresh")])],1),e._v(" "),s("v-btn",{staticClass:"mb-1",attrs:{color:"primary",dark:""},on:{click:function(t){return e.$store.dispatch("openInstanceCreateDialog")}}},[e._v(e._s(e.$t("instances.actions.new")))]),e._v(" "),s("v-spacer"),e._v(" "),s("v-text-field",{attrs:{"append-icon":"search",label:e.$t("actions.search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),e.items?s("v-data-table",{attrs:{headers:e.computedHeaders,items:e.items,search:e.search},scopedSlots:e._u([{key:"item.config.limits_memory",fn:function(t){var i=t.item;return[i.config.limits_memory?s("v-span",[e._v(e._s(e.getMemoryConfig(i))+" "+e._s(e.getMemory.limits_unit_show))]):e._e()]}},{key:"item.config.limits_disk",fn:function(t){var i=t.item;return[i.config.limits_disk?s("v-span",[e._v(e._s(e.getStorageConfig(i))+" "+e._s(e.getStorage.limits_unit_show))]):e._e()]}},{key:"item.ips[0].address",fn:function(t){var i=t.item;return[i.ips[0]?s("v-span",[e._v(e._s(e.filterIpv6(i.ips[0])))]):e._e()]}},{key:"item.ips[1].address",fn:function(t){var i=t.item;return[i.ips[1]?s("v-span",[e._v(e._s(e.filterIpv6(i.ips[1])))]):e._e()]}},{key:"item.action",fn:function(t){var i=t.item;return[s("v-btn",{attrs:{color:"primary",small:"",left:"",to:"/instance/"+i.id}},[e._v(e._s(e.$t("instances.actions.manage")))])]}},{key:"item.status",fn:function(t){var i=t.item;return[s("v-icon",{attrs:{color:e.colorstate(i.status)}},[e._v(e._s(e.iconstate(i.status)))])]}}],null,!1,2186094417)}):e._e()],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=4.be12772b995b6194f1cf.js.map